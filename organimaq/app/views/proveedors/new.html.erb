
	<div class="contentForm">
	<%= link_to 'Volver', clientes_path, class: "btn btn-warning" %><br>
	<legend>Ingresar Proveedor</legend>

		<%= bootstrap_form_for (@proveedor)  do |f| %>
		<div class="form-group">
			<div class="form-inline"><div class="form-group">	
			<%= f.number_field :rut, :maxlength => 8, label: "Rut  :", :required => true %>
			<%= f.text_field :dv, :maxlength => 1, label: "- " %>
			</div></div>
			<%= f.text_field :nombre, label: "Proveedor", :required => true %>
			<%= f.text_field :direccion %>
			<%= f.text_field :telefono %>
			<%= f.email_field :email, label: "Email" %>
			<%= f.text_field :giro %>
			
			<%= f.primary 'Guardar' %>
		
		</div>
		
		<% end %>
		
	</div>
  <script type="text/javascript">

    var calculaDigitoVerificador = function (rut) {

     
  // type check
  if (!rut || !rut.length || typeof rut !== 'string') {
    return -1;
  }
  // serie numerica
  var secuencia = [2,3,4,5,6,7,2,3];
  var sum = 0;
  //
  for (var i=rut.length - 1; i >=0; i--) {
    var d = rut.charAt(i)
    sum += new Number(d)*secuencia[rut.length - (i + 1)];
  };
  // sum mod 11
  var rest = 11 - (sum % 11);
  // si es 11, retorna 0, sino si es 10 retorna K,
  // en caso contrario retorna el numero
  return rest === 11 ? 0 : rest === 10 ? "K" : rest;
};


 $("#proveedor_rut").on('change',
  function(){

   $("#proveedor_dv").val(calculaDigitoVerificador($("#proveedor_rut").val()));

  });

  </script>